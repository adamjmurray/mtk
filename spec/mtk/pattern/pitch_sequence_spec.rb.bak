require 'spec_helper'

describe MTK::Pattern::PitchSequence do

  let(:pitches) { [C4,D4,E4] }
  let(:pitch_sequence) { Pattern::PitchSequence.new(pitches) }


  describe ".from_pitch_classes" do
    it "creates a pitch sequence from a list of pitch classes and starting point, selecting the nearest pitch to each pitch class" do
      Pattern::PitchSequence.from_pitch_classes([C,G,B,Eb,D,C], D3).should == [C3,G2,B2,Eb3,D3,C3]
    end

    it "defaults to a starting point of C4 (middle C)" do
      Pattern::PitchSequence.from_pitch_classes([C]).should == [C4]
    end

    it "doesn't travel within an octave above or below the starting point by default" do
      Pattern::PitchSequence.from_pitch_classes([C,F,Bb,D,A,E,B]).should == [C4,F4,Bb4,D4,A3,E3,B3]
    end

    it "allows max distance above or below the starting point to be set via the third argument" do
      Pattern::PitchSequence.from_pitch_classes([C,F,Bb,D,A,E,B], C4, 6).should == [C4,F4,Bb3,D4,A3,E4,B3]
    end
  end


end

describe MTK::Pattern do

    it "converts the arguments to Pitches when possible" do
      Pattern.PitchSequence(:C4,:D4,:E4).elements.should == [C4,D4,E4]
    end
  end

end
